<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.SplitPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>

<BorderPane prefHeight="700.0" prefWidth="900.0" styleClass="root-pane" xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.oop4clinic.clinicmanagement.controller.admin.DoctorManagementController" stylesheets="/static/css/admin-styles.css">

    <!-- Thanh tiÃªu Ä‘á» + tÃ¬m kiáº¿m / hÃ nh Ä‘á»™ng nhanh -->
    <top>
        <VBox spacing="12.0">
            <Label styleClass="header-title" text="ðŸ‘¨â€âš•ï¸ Quáº£n lÃ½ bÃ¡c sÄ©" />
            <HBox spacing="10.0" alignment="CENTER_LEFT">
                <TextField fx:id="txtSearch" promptText="TÃ¬m theo tÃªn / SÄT / Email" styleClass="search-field" HBox.hgrow="ALWAYS" />
                <ComboBox fx:id="cbDepartment" promptText="Khoa" styleClass="styled-combo-box" />
                <ComboBox fx:id="cbSpecialty" promptText="ChuyÃªn mÃ´n" styleClass="styled-combo-box" />
                <ComboBox fx:id="cbActive" promptText="Tráº¡ng thÃ¡i" styleClass="styled-combo-box" />
                <Button fx:id="btnFilter" onAction="#onApplyFilterTop" text="Lá»c" />
                <Button mnemonicParsing="false" onAction="#onClearFilterTop" text="XÃ³a Lá»c" />
                <Region HBox.hgrow="ALWAYS" />
                <Button fx:id="btnImport" text="Import" />
                <Button fx:id="btnExport" text="Export" />
                <Button fx:id="btnAdd" onAction="#onAddDoctor" styleClass="primary-button" text="+ ThÃªm bÃ¡c sÄ©" />
            </HBox>
        </VBox>
    </top>

    <!-- ThÃ¢n: báº£ng bÃªn trÃ¡i + form chi tiáº¿t bÃªn pháº£i -->
    <center>
        <SplitPane fx:id="split" dividerPositions="0.75" prefWidth="922.0">
            <!-- KHá»I TRÃI: DANH SÃCH -->
            <VBox spacing="10.0" style="-fx-background-color:#ddefff; -fx-background-radius:20; -fx-padding:12;">
                <Label style="-fx-text-fill:#0088ff; -fx-font-size:16; -fx-font-weight:bold;" text="Danh sÃ¡ch bÃ¡c sÄ©" />
                <TableView fx:id="tblDoctors" minWidth="0.0" onMouseClicked="#onDoctorTableClicked" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="colCode" text="MÃ£" />
                        <TableColumn fx:id="colFullName" prefWidth="180" text="Há» tÃªn" />
                        <TableColumn fx:id="colDepartment" prefWidth="120.0" text="Khoa" />
                        <TableColumn fx:id="colGender" text="Giá»›i tÃ­nh" />
                        <TableColumn fx:id="colStatus" prefWidth="110.0" text="Tráº¡ng thÃ¡i" />
                        <TableColumn fx:id="colPhone" prefWidth="110.0" text="SÄT" />
                        <TableColumn fx:id="colEmail" prefWidth="150.0" text="Email" />
                        <TableColumn fx:id="colFee" prefWidth="100.0" text="PhÃ­ khÃ¡m" />
                    </columns>
                    <columnResizePolicy>
                        <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                    </columnResizePolicy>
                </TableView>
            </VBox>

            <!-- KHá»I PHáº¢I: CHI TIáº¾T / FORM -->
            <VBox fx:id="detailPane" minWidth="0.0" spacing="10.0" style="-fx-background-color:#ddefff; -fx-background-radius:20; -fx-padding:12;">
                <HBox>
                    <Label style="-fx-text-fill:#0088ff; -fx-font-size:16; -fx-font-weight:bold;" text="Chi tiáº¿t bÃ¡c sÄ©" />
                    <Region HBox.hgrow="ALWAYS" />
                    <Button fx:id="btnEdit" disable="true" onAction="#onUpdateDoctor" text="Sá»­a" />
                    <Button fx:id="btnSave" onAction="#onSaveDoctor" styleClass="primary-button" text="LÆ°u" />
                    <Button fx:id="btnDeactivate" text="NgÆ°ng kÃ­ch hoáº¡t" />
                </HBox>

                <!-- FORM GRID 2 Cá»˜T -->
                <GridPane hgap="12" vgap="10">
                    <columnConstraints>
                        <ColumnConstraints percentWidth="35" />
                        <ColumnConstraints percentWidth="65" />
                    </columnConstraints>

                    <Label text="Há» tÃªn:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                    <TextField fx:id="txtFullName" GridPane.columnIndex="1" GridPane.rowIndex="0" />

                    <Label text="Giá»›i tÃ­nh:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                    <ComboBox fx:id="cbGender" GridPane.columnIndex="1" GridPane.rowIndex="1" />

                    <Label text="NgÃ y sinh:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                    <DatePicker fx:id="dpDob" GridPane.columnIndex="1" GridPane.rowIndex="2" />

                    <Label text="SÄT:" GridPane.columnIndex="0" GridPane.rowIndex="3" />
                    <TextField fx:id="txtPhone" GridPane.columnIndex="1" GridPane.rowIndex="3" />

                    <Label text="Email:" GridPane.columnIndex="0" GridPane.rowIndex="4" />
                    <TextField fx:id="txtEmail" GridPane.columnIndex="1" GridPane.rowIndex="4" />

                    <Label text="Khoa:" GridPane.columnIndex="0" GridPane.rowIndex="5" />
                    <ComboBox fx:id="cbDepartmentForm" GridPane.columnIndex="1" GridPane.rowIndex="5" />

                    <Label text="Tráº¡ng thÃ¡i" GridPane.columnIndex="0" GridPane.rowIndex="6" />
                    <ComboBox fx:id="doctorStatus" prefWidth="150.0" GridPane.columnIndex="1" GridPane.rowIndex="6" />

                    <Label text="PhÃ­ khÃ¡m:" GridPane.columnIndex="0" GridPane.rowIndex="7" />
                    <TextField fx:id="txtFee" promptText="VD: 350000" GridPane.columnIndex="1" GridPane.rowIndex="7" />

                    <Label text="Äá»‹a chá»‰:" GridPane.columnIndex="0" GridPane.rowIndex="8" />
                    <TextArea fx:id="txtAddress" prefRowCount="2" GridPane.columnIndex="1" GridPane.rowIndex="8" />

                    <Label text="Ghi chÃº:" GridPane.columnIndex="0" GridPane.rowIndex="9" />
                    <TextArea fx:id="txtNotes" prefRowCount="2" GridPane.columnIndex="1" GridPane.rowIndex="9" />

                    <rowConstraints>
                        <RowConstraints />
                        <RowConstraints />
                        <RowConstraints />
                        <RowConstraints />
                        <RowConstraints />
                        <RowConstraints />
                        <RowConstraints minHeight="10.0" prefHeight="30.0" />
                        <RowConstraints />
                        <RowConstraints />
                        <RowConstraints />
                    </rowConstraints>
                </GridPane>

                <!-- NÃºt Táº¡o tÃ i khoáº£n - cÄƒn giá»¯a -->
                <HBox alignment="CENTER" style="-fx-padding: 12 0 0 0;">
                    <Button fx:id="btnCreateAccount" onAction="#onCreateDoctorAccount" style="-fx-background-color: linear-gradient(to right, #1e80c7, #409eff);                                    -fx-text-fill: white;                                    -fx-font-weight: bold;                                    -fx-padding: 8 18;                                    -fx-background-radius: 20;                                    -fx-cursor: hand;" text="Táº¡o tÃ i khoáº£n" />
                </HBox>
            </VBox>
        </SplitPane>
    </center>

    <!-- FOOTER -->
    <bottom>
        <HBox style="-fx-padding:6 0 0 0;">
            <Label style="-fx-text-fill:#666; -fx-font-size:11;" text="* SÄT &amp; Email lÃ  duy nháº¥t. KhÃ´ng xoÃ¡ cá»©ng bÃ¡c sÄ© Ä‘Ã£ cÃ³ dá»¯ liá»‡u â€” dÃ¹ng NgÆ°ng kÃ­ch hoáº¡t." />
        </HBox>
    </bottom>

    <padding>
        <Insets bottom="0" left="0" right="0" top="4" />
    </padding>
</BorderPane>
